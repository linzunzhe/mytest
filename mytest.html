<html>

<head>
    <title>抽獎</title>
    <script src="https://d.line-scdn.net/liff/1.0/sdk.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <style>
        body {
            background-size: cover;
            width: 960px;
            height: 820px;
        }
    </style>
</head>

<body background="https://member.tatung.com/Content/event/airconditioner_aci/img_2/bn-bg.jpg" onload="num_turn()">
    <div style="width:100%;height:100%;">
        <input type="button" onclick="getBubble()" style="background-color: transparent;background-image:url(https://member.tatung.com/Content/event/airconditioner_aci/img/round_s_01.png);width: 960px;height: 100%;background-size: cover;border:none;"
            id="imgg">
    </div>
    </button>
    <script>
        var num = 1;
        var imgg = document.getElementById('imgg');
        function num_turn() {
            num = num % 6 + 1;
            switch (num) {
                case 1:
                    imgg.style = "background-color: transparent;background-image:url(https://member.tatung.com/Content/event/airconditioner_aci/img/round_s_01.png);width: 960px;height: 100%;background-size: cover;border:none;";
                    break;
                case 2:
                    imgg.style = "background-color: transparent;background-image:url(https://member.tatung.com/Content/event/airconditioner_aci/img/round_s_02.png);width: 960px;height: 100%;background-size: cover;border:none;";
                    break;
                case 3:
                    imgg.style = "background-color: transparent;background-image:url(https://member.tatung.com/Content/event/airconditioner_aci/img/round_s_03.png);width: 960px;height: 100%;background-size: cover;border:none;";
                    break;
                case 4:
                    imgg.style = "background-color: transparent;background-image:url(https://member.tatung.com/Content/event/airconditioner_aci/img/round_s_04.png);width: 960px;height: 100%;background-size: cover;border:none;";
                    break;
                case 5:
                    imgg.style = "background-color: transparent;background-image:url(https://member.tatung.com/Content/event/airconditioner_aci/img/round_s_05.png);width: 960px;height: 100%;background-size: cover;border:none;";
                    break;
                case 6:
                    imgg.style = "background-color: transparent;background-image:url(https://member.tatung.com/Content/event/airconditioner_aci/img/round_s_06.png);width: 960px;height: 100%;background-size: cover;border:none;";
                    break;
            }
            setTimeout(num_turn, 50);
        }

        function getBubble() {
            /*liff.init(function (){
                $.post('/getlineuserid');
            }, function (err){console.log("error: " + err);})*/
            liff.sendMessages([{
                "type": "flex",
                "altText": "e同購會員綁定",
                "contents": {
                    "type": "bubble",
                    "hero": {
                        "type": "image",
                        "url": "https://pgw.udn.com.tw/gw/photo.php?u=https://uc.udn.com.tw/photo/2017/07/05/99/3719993.jpg&x=0&y=0&sw=0&sh=0&sl=W&fw=400",
                        "size": "5xl",
                        "aspectRatio": "16:9",
                        "aspectMode": "fit",
                        "action": {
                            "type": "uri",
                            "uri": "https://tatungloginaccount.herokuapp.com/tatunglogin?linkToken=" + linkToken.linkToken
                        }
                    },
                    "body": {
                        "type": "box",
                        "layout": "vertical",
                        "spacing": "md",
                        "action": {
                            "type": "uri",
                            "uri": "https://tatungloginaccount.herokuapp.com/tatunglogin?linkToken=" + linkToken.linkToken
                        },
                        "contents": [
                            {
                                "type": "text",
                                "text": "e同購會員綁定",
                                "size": "xl",
                                "weight": "bold",
                                "action": {
                                    "type": "uri",
                                    "uri": "https://tatungloginaccount.herokuapp.com/tatunglogin?linkToken=" + linkToken.linkToken
                                },
                            },
                            {
                                "type": "text",
                                "text": "請點選下方按鈕進行e同購會員綁定",
                                "wrap": true,
                                "color": "#aaaaaa",
                                "size": "md",
                                "action": {
                                    "type": "uri",
                                    "uri": "https://tatungloginaccount.herokuapp.com/tatunglogin?linkToken=" + linkToken.linkToken
                                },
                            }
                        ]
                    },
                    "footer": {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [
                            {
                                "type": "spacer",
                                "size": "xxl"
                            },
                            {
                                "type": "button",
                                "style": "primary",
                                "color": "#905c44",
                                "action": {
                                    "type": "uri",
                                    "label": "點我進行綁定",
                                    "uri": "https://tatungloginaccount.herokuapp.com/tatunglogin?linkToken=" + linkToken.linkToken
                                }
                            }
                        ]
                    }
                }//contents end
            }]
            ).then(() => {console.log("message sent");}).catch ((err) => {console.log("error: " + err);});
            liff.closeWindow();
        }
    </script>
</body>

</html>